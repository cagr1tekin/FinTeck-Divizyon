# Ä°nteraktif Kredi - Web Åube 2.0 Cursor Rules

## ğŸ¯ Proje Ã–zeti
Bu proje bir FinTech Web Åube uygulamasÄ±dÄ±r. KullanÄ±cÄ±larÄ±n interaktif bir ÅŸekilde kredi baÅŸvurusu yapabildiÄŸi, dijital ÅŸube deneyimi sunan bir platform geliÅŸtirilecektir.

---

## ğŸ“‹ Genel Kurallar

### Dil ve Ä°letiÅŸim
- TÃ¼m kod yorumlarÄ± TÃ¼rkÃ§e yazÄ±lmalÄ±dÄ±r
- DeÄŸiÅŸken ve fonksiyon isimleri Ä°ngilizce olmalÄ±dÄ±r
- KullanÄ±cÄ±ya gÃ¶sterilecek metinler TÃ¼rkÃ§e olmalÄ±dÄ±r

### Ã–ncelikler
1. GÃ¼venlik (Finansal veri korumasÄ±)
2. Performans (Page Speed optimizasyonu)
3. KullanÄ±cÄ± Deneyimi (Modern, interaktif tasarÄ±m)
4. Kod OkunabilirliÄŸi

---

## ğŸ”§ Teknoloji YÄ±ÄŸÄ±nÄ±

### ZORUNLU Teknolojiler
- **Backend:** C# .NET Core 8+ (Razor Pages)
- **Frontend Styling:** SCSS (Custom, framework-free)
- **JavaScript:** Vanilla JS + jQuery
- **Para HesaplamalarÄ±:** decimal tipi (float/double YASAK)

### YASAK Teknolojiler
- âŒ Bootstrap, Tailwind veya herhangi bir CSS framework
- âŒ React, Vue, Angular (sadece Razor Pages)
- âŒ !important kullanÄ±mÄ±
- âŒ @Html.Raw() kullanÄ±mÄ± (XSS riski)

---

## ğŸ“ KlasÃ¶r YapÄ±sÄ±

```
ProjectRoot/
â”œâ”€â”€ Pages/                  # Razor SayfalarÄ± (.cshtml)
â”‚   â”œâ”€â”€ Shared/             # Layout, Partial View
â”‚   â”œâ”€â”€ Onboarding/         # GiriÅŸ modÃ¼lÃ¼
â”‚   â”œâ”€â”€ Dashboard/          # Ana panel
â”‚   â””â”€â”€ Profile/            # Profil yÃ¶netimi
â”œâ”€â”€ Styles/                 # Ham SCSS DosyalarÄ±
â”‚   â”œâ”€â”€ abstracts/          # _variables.scss, _mixins.scss
â”‚   â”œâ”€â”€ base/               # Reset, Typography
â”‚   â”œâ”€â”€ components/         # Butonlar, Kartlar, Formlar
â”‚   â”œâ”€â”€ pages/              # Sayfaya Ã¶zel stiller
â”‚   â””â”€â”€ main.scss           # Ana import dosyasÄ±
â”œâ”€â”€ wwwroot/                # Statik dosyalar
â”‚   â”œâ”€â”€ css/                # DerlenmiÅŸ CSS
â”‚   â”œâ”€â”€ js/                 # JavaScript dosyalarÄ±
â”‚   â””â”€â”€ img/                # GÃ¶rseller
â”œâ”€â”€ Services/               # API servisleri
â””â”€â”€ Models/                 # Data modelleri
```

---

## ğŸ¨ CSS/SCSS KurallarÄ±

### Ä°simlendirme: BEM + snake_case
```scss
// âœ… DOÄRU
.loan_card { }
.loan_card__header { }
.loan_card__title { }
.loan_card--approved { }
.loan_card--rejected { }

// âŒ YANLIÅ
.loanCard { }           // camelCase yasak
.loan-card { }          // kebab-case yasak
.LoanCard { }           // PascalCase yasak
```

### SCSS DeÄŸiÅŸkenleri
```scss
// Styles/abstracts/_variables.scss
$brand_color: #YOUR_COLOR;
$brand_secondary: #YOUR_COLOR;
$text_primary: #333333;
$text_secondary: #666666;
$error_color: #DC3545;
$success_color: #28A745;
$warning_color: #FFC107;

$font_primary: 'Inter', sans-serif;
$font_size_base: 16px;
$border_radius: 8px;
$spacing_unit: 8px;
```

### Yasaklar
```scss
// âŒ YASAKLAR
div { }                 // Tag selector (reset hariÃ§)
.class { !important; }  // !important kullanÄ±mÄ±
.a { .b { .c { .d { } } } }  // 3+ seviye nesting
```

### Component Ã–rneÄŸi
```scss
// Styles/components/_buttons.scss
.btn_primary {
    background-color: $brand_color;
    color: white;
    padding: $spacing_unit * 1.5 $spacing_unit * 3;
    border-radius: $border_radius;
    border: none;
    cursor: pointer;
    font-family: $font_primary;
    font-weight: 600;
    transition: background-color 0.2s ease;
    
    &:hover {
        background-color: darken($brand_color, 10%);
    }
    
    &:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }
    
    &--full_width {
        width: 100%;
        display: block;
    }
    
    &--loading {
        position: relative;
        color: transparent;
        
        &::after {
            content: '';
            position: absolute;
            // Loading spinner styles
        }
    }
}
```

---

## ğŸ“ JavaScript/jQuery KurallarÄ±

### Selector Caching (ZORUNLU)
```javascript
// âœ… DOÄRU - Selector bir kez cache'lenir
var $submit_btn = $('#submit_btn');
var $loan_form = $('#loan_form');

$submit_btn.prop('disabled', true);
$submit_btn.text('Ä°ÅŸleniyor...');

// âŒ YANLIÅ - Her seferinde DOM taranÄ±r
$('#submit_btn').prop('disabled', true);
$('#submit_btn').text('Ä°ÅŸleniyor...');
```

### Event Delegation
```javascript
// âœ… Dinamik elementler iÃ§in
$(document).on('click', '.dynamic_element', function() {
    // Ä°ÅŸlemler
});

// âœ… Statik elementler iÃ§in
$('#static_element').on('click', function() {
    // Ä°ÅŸlemler
});
```

### Double Submit Prevention (ZORUNLU)
```javascript
// Form gÃ¶nderiminde buton kilitleme
$('#loan_form').on('submit', function(e) {
    var $form = $(this);
    var $btn = $form.find('.btn_submit');
    
    // Zaten gÃ¶nderiliyorsa engelle
    if ($form.data('submitting')) {
        e.preventDefault();
        return false;
    }
    
    // GÃ¶nderim iÅŸaretle ve butonu kilitle
    $form.data('submitting', true);
    $btn.prop('disabled', true)
        .addClass('btn_primary--loading')
        .text('Ä°ÅŸleniyor...');
});
```

### Input Masking
```javascript
// TCKN Maskeleme (5XX...XX formatÄ±)
function mask_tckn(tckn) {
    if (!tckn || tckn.length < 11) return tckn;
    return tckn.substring(0, 1) + '*'.repeat(8) + tckn.substring(9);
}

// Telefon Maskeleme
function mask_phone(phone) {
    if (!phone || phone.length < 10) return phone;
    return phone.substring(0, 3) + '****' + phone.substring(7);
}

// Para FormatÄ± (10000 -> 10.000 â‚º)
function format_currency(amount) {
    return new Intl.NumberFormat('tr-TR', {
        style: 'currency',
        currency: 'TRY',
        minimumFractionDigits: 0
    }).format(amount);
}
```

### AJAX Ä°stekleri
```javascript
// API Ã§aÄŸrÄ±sÄ± Ã¶rneÄŸi
function validate_customer(tckn, gsm) {
    var $btn = $('#validate_btn');
    
    $btn.prop('disabled', true).text('DoÄŸrulanÄ±yor...');
    
    $.ajax({
        url: '/api/customer/tckn-gsm',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ TCKN: tckn, GSM: gsm }),
        success: function(response) {
            if (response.success) {
                show_toast('DoÄŸrulama baÅŸarÄ±lÄ±!', 'success');
                // Sonraki adÄ±ma geÃ§
            } else {
                show_toast(response.message, 'error');
            }
        },
        error: function(xhr, status, error) {
            show_toast('Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.', 'error');
            console.error('API Error:', status, error);
        },
        complete: function() {
            $btn.prop('disabled', false).text('DoÄŸrula');
        }
    });
}
```

---

## ğŸ”’ GÃ¼venlik KurallarÄ±

### Veri Tipleri
```csharp
// âœ… DOÄRU - Parasal deÄŸerler iÃ§in decimal
public decimal LoanAmount { get; set; }
public decimal InterestRate { get; set; }
public decimal MonthlyPayment { get; set; }

// âŒ YANLIÅ - float/double kullanÄ±mÄ±
public double LoanAmount { get; set; }  // YASAK!
public float InterestRate { get; set; }  // YASAK!
```

### Log Maskeleme
```csharp
// âœ… DOÄRU - Hassas veriler maskelenir
_logger.LogInformation("MÃ¼ÅŸteri doÄŸrulandÄ±: TCKN={MaskedTckn}", MaskTckn(tckn));

// âŒ YANLIÅ - AÃ§Ä±k metin loglama
_logger.LogInformation("MÃ¼ÅŸteri doÄŸrulandÄ±: TCKN={Tckn}", tckn);  // YASAK!
```

### XSS KorumasÄ±
```csharp
// âŒ YASAK - Html.Raw kullanÄ±mÄ±
@Html.Raw(userInput)

// âœ… DOÄRU - Encoded output
@Model.UserInput
@Html.Encode(Model.UserInput)
```

---

## ğŸ—ï¸ Razor Pages KurallarÄ±

### Logic AyrÄ±mÄ±
```csharp
// Views (.cshtml) - SADECE gÃ¶rÃ¼ntÃ¼leme
@model LoanApplicationModel

<div class="loan_form">
    <input asp-for="Amount" class="form_input" />
    <span asp-validation-for="Amount" class="form_error"></span>
</div>

// PageModel (.cshtml.cs) - TÃœM iÅŸ mantÄ±ÄŸÄ±
public class LoanApplicationModel : PageModel
{
    [BindProperty]
    public decimal Amount { get; set; }
    
    public async Task<IActionResult> OnPostAsync()
    {
        if (!ModelState.IsValid)
            return Page();
            
        // API Ã§aÄŸrÄ±larÄ± ve iÅŸ mantÄ±ÄŸÄ± BURADA
        var result = await _apiService.SubmitLoanApplication(Amount);
        return RedirectToPage("/Dashboard");
    }
}
```

### Tag Helpers
```html
<!-- âœ… DOÄRU - Tag Helpers kullan -->
<input asp-for="LoanAmount" class="form_input" />
<select asp-for="OccupationId" asp-items="Model.Occupations" class="form_select"></select>
<button type="submit" class="btn_primary">GÃ¶nder</button>

<!-- âŒ YANLIÅ - Inline event handlers -->
<button onclick="submitForm()">GÃ¶nder</button>
```

---

## ğŸ“± UI States

### Input States
```scss
.form_input {
    border: 1px solid #ddd;
    padding: 12px 16px;
    border-radius: $border_radius;
    transition: all 0.2s ease;
    
    // Default
    &::placeholder {
        color: #999;
    }
    
    // Focus/Active
    &:focus {
        border-color: $brand_color;
        box-shadow: 0 0 0 3px rgba($brand_color, 0.1);
        outline: none;
    }
    
    // Error
    &--error {
        border-color: $error_color;
        
        &:focus {
            box-shadow: 0 0 0 3px rgba($error_color, 0.1);
        }
    }
    
    // Disabled
    &:disabled {
        background-color: #f5f5f5;
        cursor: not-allowed;
        opacity: 0.7;
    }
}
```

### Toast Notifications
```javascript
// Toast bildirimi gÃ¶ster
function show_toast(message, type) {
    var $toast = $('<div>', {
        class: 'toast toast--' + type,
        text: message
    });
    
    $('body').append($toast);
    
    setTimeout(function() {
        $toast.addClass('toast--visible');
    }, 10);
    
    setTimeout(function() {
        $toast.removeClass('toast--visible');
        setTimeout(function() {
            $toast.remove();
        }, 300);
    }, 3000);
}
```

---

## ğŸ”Œ API Entegrasyonu

### Base URL'ler
```csharp
public static class ApiEndpoints
{
    public const string CUSTOMERS_API = "https://customers-api.azurewebsites.net";
    public const string IDC_API = "https://api-idc.azurewebsites.net";
    public const string DEFAULT_TOKEN = "fe7vSdh1QqqcdRzZO4HqG7TvDL5zEoF2bwKzOzAGJE67s";
}
```

### Service Pattern
```csharp
public interface ICustomerApiService
{
    Task<ApiResponse<CustomerInfo>> ValidateTcknGsm(string tckn, string gsm);
    Task<ApiResponse<AddressInfo>> GetCustomerAddress(long customerId);
    Task<ApiResponse<bool>> SaveJobProfile(JobProfileRequest request);
}

public class CustomerApiService : ICustomerApiService
{
    private readonly HttpClient _httpClient;
    
    public CustomerApiService(HttpClient httpClient)
    {
        _httpClient = httpClient;
        _httpClient.DefaultRequestHeaders.Authorization = 
            new AuthenticationHeaderValue("Bearer", ApiEndpoints.DEFAULT_TOKEN);
    }
    
    // Implementasyon...
}
```

---

## âœ… Code Review Checklist

Kod gÃ¶nderilmeden Ã¶nce kontrol edilmesi gerekenler:

### CSS/SCSS
- [ ] Class isimleri snake_case mi?
- [ ] BEM metodolojisi uygulandÄ± mÄ±?
- [ ] !important kullanÄ±lmadÄ± mÄ±?
- [ ] Nesting 3 seviyeyi geÃ§miyor mu?
- [ ] Tag selector kullanÄ±lmadÄ± mÄ±?

### JavaScript
- [ ] jQuery selector'larÄ± cache'lendi mi?
- [ ] Form submit'te buton kilitleniyor mu?
- [ ] console.log/debugger temizlendi mi?
- [ ] Error handling yapÄ±ldÄ± mÄ±?

### C# / Razor
- [ ] Parasal deÄŸerler decimal mi?
- [ ] .cshtml'de iÅŸ mantÄ±ÄŸÄ± yok mu?
- [ ] Html.Raw kullanÄ±lmadÄ± mÄ±?
- [ ] Hassas veriler maskelendi mi?

### Genel
- [ ] TÃ¼rkÃ§e karakter desteÄŸi dÃ¼zgÃ¼n mÃ¼?
- [ ] Responsive tasarÄ±m Ã§alÄ±ÅŸÄ±yor mu?
- [ ] EriÅŸilebilirlik (a11y) kontrol edildi mi?
- [ ] Performans optimize mi?

---

## ğŸ“š Referans Dosyalar

- **Figma:** https://www.figma.com/design/7RZjOHyoXFUfzRabFCHqJk
- **Case Brief:** `1. Case Brief_i - Web Åube 2.0 - Ä°nteraktif Kredi.docx`
- **GeliÅŸtirme StandartlarÄ±:** `2. GeliÅŸtirme StandartlarÄ± - Ä°nteraktif Kredi.docx`
- **API Demo Panel:** `WebSube-API-extracted/WebSube-API/`
- **Meslek Listesi:** `MÃ¼ÅŸteri Ä°ÅŸ - SektÃ¶r Profili Bilgileri/job_id.json`
- **SektÃ¶r Listesi:** `MÃ¼ÅŸteri Ä°ÅŸ - SektÃ¶r Profili Bilgileri/sektor_id.json`
